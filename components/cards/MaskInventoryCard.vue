<template>
  <v-col cols="12" class="DataCard">
    <v-card>
      <!--<v-card-title>{{ $t('マスクの在庫状況') }}</v-card-title>-->
      <v-card-title>{{ $t('県内のゲンキー店舗') }}</v-card-title>
      <v-card-text>
        <div>
          <!--
          <p class="visibleShops">
            {{ $t('表示中の店舗') }}:
            <span
              v-text="locationsVisibleOnMap.length > 0 ? locationsVisibleOnMap : $t('表示できる店舗はありません')"
            />
          </p>
          -->
        </div>
        <div id="map-wrapper">
          <no-ssr>
            <l-map
              id="map"
              :center="center"
              :zoom="zoom"
              min-zoom=9
            >
              <l-tile-layer
                :url="url"
                :attribution="attribution"
              ></l-tile-layer>
              <l-marker
                v-for="(genky, index) of genkies"
                v-if="genky.IDg === '2'"
                :key=index
                :lat-lng="[genky.緯度, genky.経度]"
              >
                <l-popup>
                  <div>
                    {{ genky.店舗名 }}
                  </div>
                </l-popup>
              </l-marker>  
            </l-map>
          </no-ssr>
        </div>
      </v-card-text>
    </v-card>
  </v-col>
</template>

<script>
import GenkyLocations from '@/data/genky_locations.json'

export default {
  data() {
    return {
      url: "https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png",
      zoom: 9,
      center: [35.833388, 136.185209],
      genkies: GenkyLocations,
      attribution: '<a href="https://www.gsi.go.jp/kikakuchousei/kikakuchousei40182.html">国土地理院</a>'
    }
  },
};
</script>
<style scoped>
#map-wrapper {
  width: 600px;
  height: 600px;
}
</style>
